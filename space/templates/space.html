{% extends 'base.html' %}
{% load static %}
{% block title %} 공간에 대한 디테일 페이지 {% endblock %}
{% block link %} {% static 'css/table.css' %}{% endblock %}

{% block content %}


<!-- 공간 상세 페이지 -->

{% if space.space_image %}
사진 : <img src = "{{space.space_image.url}}" width="150">
{% endif %} 

<div> 공간 운영자 : {{space.host_id}} </div>
<div> 공간 이름 : {{space.space_name}} </div>
<div> 공간 유형 : {{space.space_type}}</div>
<div> 전화번호 : {{space.contact_number}}</div>
<div> 시간당 가격 : {{space.price}}</div>
<div> 공간 정보 : {{space.space_brief_detail}}</div>
<div> 공간 상세 정보: {{space.space_detail}}</div>
<div> 태그 : {% for tag in space.tags.all %}
    #{{ tag.name }}
    {% endfor %}
</div>
<div> 주소 : {{space.address}}</div>
<div> 사이트 주소 : <a>{{space.url}}</a></div>
<div> 좋아요 수 : {{space.space_likes}}</div>

<br>

<button><a href = "{% url 'book' space.id %}"> 예약하기 </a></button>


<hr>

<!-- 리뷰 -->
<h2> 리뷰 달기</h2>

{% if user.is_authenticated %}
<form action = "{% url 'create_review' space.id %}" method="POST">
    {% csrf_token %}
    별점 :  ☆☆☆☆☆☆ <br>
    <textarea name = "review_content" cols="70" rows="10" placeholder="{{space.space_name}}의 시설은 어땠나요?"></textarea>
    <button type = "submit"> 리뷰 등록 </button>
</form> 
{% endif %}
<br>

<!-- 모든 리뷰 보기 -->
<h2> 리뷰 보기 </h2>
{% for review in space.review_set.all %}
{{ review.review_content|linebreaksbr }} <br>
{% endfor %}


<!-- Q&A -->
<h2> Q&A </h2>
{% if user.is_authenticated %}
<form action = "{% url 'create_question' space.id %}" method="POST">
    {% csrf_token %}
    질문 작성자 : <input type = "text" name = "writer" placeholder="작성자 이름"> <br>
    질문 내용: <br>
    <textarea name = "question_content" cols="70" rows="5" placeholder="{{space.space_name}}에 대해 궁금한 점이 있나요?"></textarea>
    <button type = "submit"> 리뷰 등록 </button>
</form> 
{% endif %}
<br>


<!-- 모든 질문 보기 -->
<h2> Questions </h2>
{% for question in space.question_set.all %}
<b>{{ question.writer|linebreaksbr }} </b>님의 질문 : {{ question.question_content|linebreaksbr }} <br>

<!-- 현재 user가 공간 등록자와 동일한 유저라면 위의 질문에 대한 답변 등록 가능-->
{% if user.user.id == space.host_id %} 
<h4> 공간 운영자 {{user}} 님의 답변 달기 </h4>
<form action = "{% url 'create_answer' space.id question.id %}" method="POST">
    {% csrf_token %}
    답변 : 
    <textarea name = "question_content" cols="30" rows="5" placeholder="{{question.writer}}님의 질문에 대한 답을 달아주세요."></textarea>
    <button type = "submit"> 답변 등록 </button>
</form> 
{% endif %}
{% endfor %}


{% endblock %} 